<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page A-frame</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kylebakerio/ada-water/ada-water.js"></script>
</head>

<body>
    <img id="sky" src="./assets/sky.png" alt="">
    

    <a-asset-item id="tree" src="./assets/vegetations/tree.glb"></a-asset-item>
    <a-asset-item id="tree2" src="./assets/vegetations/tree-2.glb"></a-asset-item>

    <!-- Pour les éléments qui se répètent tu les fais en grand sur blender -->


    <!-- fog="type: linear; color: #023e8a; near: 1; far: 7" background="color: #ECECEC" -->
    <a-scene>
        <a-sky material="src: #sky" ></a-sky>
        <a-plane scale="100 10 100" rotation="90 0 0" position="0 3 0" color="#FFF"></a-plane> 

        <!-- Lake -->
        <!-- <a-water scale="10 10 5" position="59 0 40" width="10" height="100" voronoi-points="0" opacity=".7"></a-water>  -->
    

        <!-- Forest -->
        <a-entity gltf-model="#bigtree" rotation="0 110 0" position="-17 18 -11" scale="15 15 15"></a-entity>
        
        <a-entity gltf-model="#bush" rotation="0 90 0" position="-8 0 30" scale="3 3 3"></a-entity>
        <a-entity gltf-model="#bushflowers" rotation="0 90 0" position="-8 4 35" scale="3 3 3"></a-entity>

        <a-entity gltf-model="#treeautumnpink" rotation="0 180 0" position="-0 -0 0" scale=".05 .05 .05"></a-entity>
        <a-entity gltf-model="#treeautumn" rotation="0 180 0" position="-10 -6 35" scale="8 8 8"></a-entity>
        <a-entity gltf-model="#tree" rotation="0 90 0" position="-10 15 20" scale="15 15 15"></a-entity>
  



        <!-- Lights -->
        <a-entity light="type: directional; color: #14213d; intensity: 0.5" position="0 10 -50"
            target="#vending"></a-entity>
        <a-entity light="type: ambient; color: yellow" position="0 10 0"></a-entity>

        <!-- CAMERA & manettes -->
        <a-entity movement-controls="speed:0.6; fly:true;" id="rig" position="0 1.5 5" rotation="0 0 0">
            <!-- Z80 pour la cam pour le début -->
            <a-camera look-controls="pointerLockEnabled: true" position="0 1.6 0">
                <a-cursor></a-cursor>
            </a-camera>
            <a-entity laser-controls="hand: left"
                raycaster="objects: .clickable; far: 20; showLine: true; raycaster: red;"
                position="-0.5 1.5 -0.5"></a-entity>
            <a-entity laser-controls="hand: right"
                raycaster="objects: .clickable; far: 20; showLine: true; raycaster: red;"
                position="0.5 1.5 -0.5"></a-entity>
        </a-entity>

        <!-- Sound -->
         <a-sound src="./sound/ost-violette-evergarden.mp3" loop="true" autoplay="true"></a-sound>
    </a-scene>
</body>

</html>
<script>
    AFRAME.registerComponent("cursor-listener", {
        init: function () {
            const sound = document.querySelector("#distrib");
            this.el.addEventListener("click", function (evt) {
                console.log("play sound");
                sound.play();
            });
        },
    });


</script>

<!--  Faire au survol luminescense sur des objets et quand on clique sur le distrib GLING GLING  -->