<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page A-frame</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kylebakerio/ada-water/ada-water.js"></script>
</head>

<body>
    <img id="sky" src="./assets/sky.png" alt="">
    
    <a-asset-item id="pendantif" src="./assets/gem.glb"></a-asset-item>
    <a-asset-item id="cabin" src="./assets/cabin.glb"></a-asset-item>
    <a-asset-item id="forest" src="./assets/vegetations/sapinforest.glb"></a-asset-item>
    <a-asset-item id="bush" src="./assets/vegetations/bush.glb"></a-asset-item>
    <a-asset-item id="bigtree" src="./assets/vegetations/bigtree.glb"></a-asset-item>
    <a-asset-item id="sapin" src="./assets/vegetations/sapin.glb"></a-asset-item>
    <a-asset-item id="bushflowers" src="./assets/vegetations/bushflowers.glb"></a-asset-item>
    <a-asset-item id="tree" src="./assets/vegetations/tree.glb"></a-asset-item>
    <a-asset-item id="tree2" src="./assets/vegetations/tree-2.glb"></a-asset-item>
    <a-asset-item id="treeautumn" src="./assets/vegetations/autumntree.glb"></a-asset-item>
    <a-asset-item id="grass" src="./assets/vegetations/grass.glb"></a-asset-item>
    <a-asset-item id="bench" src="./assets/bench.glb"></a-asset-item>
    <a-asset-item id="letter" src="./assets/letter.glb"></a-asset-item>
    <a-asset-item id="floor1" src="./assets/path.glb"></a-asset-item>
    <a-asset-item id="floor2" src="./assets/path2.glb"></a-asset-item>
    <a-asset-item id="typewriter" src="./assets/type.glb"></a-asset-item>
    <a-asset-item id="typewriter2" src="./assets/typing.glb"></a-asset-item>
    <a-asset-item id="table" src="./assets/table.glb"></a-asset-item>
    <a-asset-item id="chair" src="./assets/chair.glb"></a-asset-item>

    <!-- fog="type: linear; color: #023e8a; near: 1; far: 7" background="color: #ECECEC" -->

    <!-- Pour les éléments qui se répètent tu les fais en grand sur blender -->

    <a-scene>
        <a-sky material="src: #sky" ></a-sky>
        <!-- <a-plane scale="100 10 100" rotation="90 0 0" position="0 3 0" color="#FFF"></a-plane> -->

        <!-- Lake -->
        <!-- <a-water scale="10 10 5" position="59 0 40" width="10" height="100" voronoi-points="0" opacity=".7"></a-water>  -->

        <!-- Bush -->
    


        
        <!-- Cabin -->
        <a-entity gltf-model="#cabin" rotation="0 -10 0" position="5 0 -10" scale="60 60 60"></a-entity>
    

        <!-- Forest -->
        <a-entity gltf-model="#bigtree" rotation="0 110 0" position="-17 18 -11" scale="15 15 15"></a-entity>
        
        <a-entity gltf-model="#bush" rotation="0 90 0" position="-8 0 30" scale="3 3 3"></a-entity>
        <a-entity gltf-model="#bushflowers" rotation="0 90 0" position="-8 4 35" scale="3 3 3"></a-entity>

        <a-entity gltf-model="#treeautumnpink" rotation="0 180 0" position="-0 -0 0" scale=".05 .05 .05"></a-entity>
        <a-entity gltf-model="#treeautumn" rotation="0 180 0" position="-10 -6 35" scale="8 8 8"></a-entity>
        <a-entity gltf-model="#tree" rotation="0 90 0" position="-10 15 20" scale="15 15 15"></a-entity>
  

        <!-- Table -->
        <a-entity scale="1 1 1" position="0 0 2" rotation="0 0 0">
            <a-entity gltf-model="#typewriter" rotation="0 200 0" position="-.5 2.6 .5" scale=".8 .8 .8" class="clickable"
                cursor-listener></a-entity>
            <a-entity gltf-model="#table" rotation="0 145 0" position="0 0 0" scale="2 2 2"></a-entity>
            <a-entity gltf-model="#letter" rotation="0 45 0" position="1.3z 2.35 0" scale=".5 .5 .5"></a-entity>
            <a-entity gltf-model="#chair" rotation="0 -125 0" position="1 0 2.2" scale="3 3 3"></a-entity>
            <a-entity gltf-model="#pendantif" rotation="-90 0 0" position=".5 2.3 1" scale=".12 .12 .12"></a-entity>
        </a-entity>


        <!-- Sol -->
        <a-entity scale="1 1 1" position="0 0 -1" rotation="0 0 0">
            <a-entity gltf-model="#floor1" scale="2 1 2" position="0 -0.2 5" rotation="0 0 0"></a-entity>
            <a-entity gltf-model="#floor1" scale="2 1 2" position="0 -0.2 8.8" rotation="0 180 0"></a-entity>
            <a-entity gltf-model="#floor2" scale="2 1 2" position="0 -0.2 12.6s" rotation="0 0 0"></a-entity>
        </a-entity>
        <a-entity scale="1 1 1" position="0 0 10.5" rotation="0 0 0">
            <a-entity gltf-model="#floor1" scale="2 1 2" position="0 -0.2 5" rotation="0 0 0"></a-entity>
            <a-entity gltf-model="#floor1" scale="2 1 2" position="0 -0.2 8.8" rotation="0 180 0"></a-entity>
            <a-entity gltf-model="#floor2" scale="2 1 2" position="0 -0.2 12.6s" rotation="0 0 0"></a-entity>
        </a-entity>
        <a-entity scale="1 1 1" position="0 0 39.5" rotation="0 180 0">
            <a-entity gltf-model="#floor1" scale="2 1 2" position="0 -0.2 5" rotation="0 0 0"></a-entity>
            <a-entity gltf-model="#floor1" scale="2 1 2" position="0 -0.2 8.8" rotation="0 180 0"></a-entity>
            <a-entity gltf-model="#floor2" scale="2 1 2" position="0 -0.2 12.6s" rotation="0 0 0"></a-entity>
        </a-entity>


        <!-- Lights -->
        <!-- <a-entity light="type: directional; color: #14213d; intensity: 0.5" position="0 10 -50"
            target="#vending"></a-entity>
        <a-entity light="type: ambient; color: yellow" position="0 10 0"></a-entity> -->

        <!-- CAMERA & manettes -->
        <a-entity movement-controls="speed:0.7; fly:true;" id="rig" position="0 1.5 5" rotation="0 0 0">
            <!-- Z80 pour la cam pour le début -->
            <a-camera look-controls="pointerLockEnabled: true" position="0 1.6 0">
                <a-cursor></a-cursor>
            </a-camera>
            <a-entity laser-controls="hand: left"
                raycaster="objects: .clickable; far: 20; showLine: true; raycaster: red;"
                position="-0.5 1.5 -0.5"></a-entity>
            <a-entity laser-controls="hand: right"
                raycaster="objects: .clickable; far: 20; showLine: true; raycaster: red;"
                position="0.5 1.5 -0.5"></a-entity>
        </a-entity>

        <!-- Sound -->
         <a-sound src="./sound/ost-violette-evergarden.mp3" loop="true" autoplay="true"></a-sound>
    </a-scene>
</body>

</html>
<script>
    AFRAME.registerComponent("cursor-listener", {
        init: function () {
            const sound = document.querySelector("#distrib");
            this.el.addEventListener("click", function (evt) {
                console.log("play sound");
                sound.play();
            });
        },
    });


</script>

<!--  Faire au survol luminescense sur des objets et quand on clique sur le distrib GLING GLING  -->